{
  "name": "roots-contentful",
  "description": "An extension for using roots with the API-driven Contentful CMS",
  "version": "0.0.9",
  "author": {
    "name": "Carrot Creative"
  },
  "bugs": {
    "url": "https://github.com/carrot/roots-contentful/issues"
  },
  "dependencies": {
    "contentful": "^1.1.5",
    "lodash": "^3.10.1",
    "pluralize": "^1.2.1",
    "roots-util": "0.1.x",
    "string": "^3.1.3",
    "when": "3.7.x"
  },
  "devDependencies": {
    "chai": "3.4.1",
    "chai-as-promised": "5.1.0",
    "coffee-script": "1.10.0",
    "coveralls": "2.x",
    "istanbul": "0.4.1",
    "mocha": "2.3.4",
    "mockery": "1.4.x",
    "roots": "4.0.1"
  },
  "directories": {
    "test": "test"
  },
  "homepage": "https://github.com/carrot/roots-contentful",
  "keywords": [
    "roots-extension"
  ],
  "license": "MIT",
  "main": "lib",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/carrot/roots-contentful.git"
  },
  "scripts": {
    "coverage": "make build; NODE_ENV=test istanbul cover ./node_modules/mocha/bin/_mocha; make unbuild; open coverage/lcov-report/index.html;",
    "coveralls": "make build; make coveralls; make unbuild;",
    "test": "mocha"
  },
  "gitHead": "ec0a844610a4d093623e41e5a5a90be30c47418f",
  "readme": "# Roots Contentful\n\n[![npm](http://img.shields.io/npm/v/roots-contentful.svg?style=flat)](https://badge.fury.io/js/roots-contentful) [![tests](http://img.shields.io/travis/carrot/roots-contentful/master.svg?style=flat)](https://travis-ci.org/carrot/roots-contentful) [![dependencies](http://img.shields.io/gemnasium/carrot/roots-contentful.svg?style=flat)](https://gemnasium.com/carrot/roots-contentful)\n[![devDependencies](https://img.shields.io/david/dev/carrot/roots-contentful.svg)](https://gemnasium.com/carrot/roots-contentful)\n[![Coverage Status](https://img.shields.io/coveralls/carrot/roots-contentful.svg)](https://coveralls.io/r/carrot/roots-contentful?branch=master)\n\nAn extension for using [roots](https://github.com/jenius/roots) with the Contentful CMS API.\n\n> **Note:** This project is in early development, and versioning is a little different. [Read this](http://markup.im/#q4_cRZ1Q) for more details.\n\n### Why Should You Care?\n\nWe love static sites. They're fast, resilient, simple, and cheap.\n\nHowever, managing and updating content on a static site is a pain. This extension allows you to load data from [Contentful's](https://www.contentful.com/) API into your roots project for use in your view templates during compilation. Non-developers get an easy way to publish and manage content, while developers can still build static sites in a sane way.\n\n### Installation\n\n- make sure you are in your roots project directory\n- `npm install roots-contentful --save`\n- modify your `app.coffee` file to include the extension, as such\n\n```coffee\ncontentful = require 'roots-contentful'\n\n# ...\n\nmodule.exports =\n  extensions: [\n    contentful\n      access_token: 'YOUR_ACCESS_TOKEN'\n      space_id: 'xxxxxx'\n      locale: 'tlh'\n      locales_prefix:\n        tlh: 'klingon_'\n      content_types:\n        blog_posts:\n          id: 'xxxxxx'\n          template: 'views/_post.jade'\n          filters: { 'fields.environment[in]': ['staging', 'production'] }\n          path: (e) -> \"blogging/#{e.category}/#{slugify(e.title)}\"\n          write: 'data.json'\n          sort: compareFunction\n          transform: transformFunction\n        press_links:\n          id: 'xxxxxx'\n  ]\n\n# ...\n```\n\n### Usage\n\n#### Accessing Content in Views\n\nA `contentful` view helper object will be passed into every view containing your content. Each content type will be set as a property on `contentful` using the `name` option in your `app.coffee` configuration. For example with the `app.coffee` file above, you can access the blog posts like this:\n\n```jade\n  h1 Hello World\n  ul\n    - for post in contentful.posts\n      li\n        h2= post.title\n        p= markdown(post.body)\n```\n\nNote: if you have [Links](https://www.contentful.com/developers/docs/concepts/links/) in your content more than 10 levels deep (the max for the `include` parameter), then unresolved links can be returned.\n\n#### Single Entry Views\n\nIf a `template` option is defined for a Content Type in `app.coffee`, roots will compile a single page view for each entry in that Content Type collection. The entry will also have a `_url` key that returns the path to the single page view (so you can create links on an index page for example).\n\n#### The Entry Object\n\nContentful's [documentation](https://www.contentful.com/developers/documentation/content-delivery-api/#getting-entry) shows the API response when fetching an entry. Your content fields are nested in a `fields` key on the `entry` object. As a convenience, the entry object roots-contentful makes available in your views will have the `fields` key's value set one level higher on the object. System metadata remains accessible on the `sys` key and roots-contentful will raise an error if you have a field named `sys`. Inside your views, the entry object  will have this structure:\n\n```json\n\"entry\": {\n  \"title\": \"Wow. Such title. Much viral\",\n  \"author\": \"The Doge of Venice\"\n  # ... the rest of the fields\n  \"sys\": {\n    \"type\": \"Entry\",\n    \"id\": \"cat\"\n    # ...\n  }\n}\n```\nAnd can be accessed in your view like this:\n\n```jade\n  h2= entry.title\n  p= markdown(entry.body)\n```\n\n### Configuration Options\n\n#### access_token\n\nRequired. Your Contentful Delivery access token (API key).\n\n#### space_id\n\nRequired. The space ID containing the content you wish to retrieve.\n\n#### preview\n\nOptional. (Boolean) Allows you use the Contentful Preview API. Also able to be accessed by setting the environment variable `CONTENTFUL_ENV` to `\"develop\"` (preview api) or `\"production\"` (default cdn).\n\n#### locales\nLocales allow you to request your content in a different language, `tlh` is Klingon.\n\n##### Global locale\nOptional. (String or Array) Defines locale for all content_types.\nString: `'tlh'`\nArray: `['en-es', 'tlh']`\nWildcard: `'*'` - grabs all locales from contentful\n\n##### content_type specific locale\nOptional. (String) Define content_types locale, will override global locale. Add `locale: 'tlh'` to any of your content types and you'll retrieve that post in the specific locale.\n\n#### locales_prefix\nOptional. (Object) Defines the prefix given to a group of locales.\n\n```\nlocales_prefix:\n  'tlh': 'klingon_'\n  'en-es': 'spanish_'\n```\n\nLets say you have 3 global locales defined, `['tlh', 'en-us', 'en-es']`, and above is our defined locales_prefix. Since we did not declare `'en-us'` you can access it with `contentful.en_us_blog_posts`. Similarly you can access each preix according to what you've set in the object above. `'tlh'` would be accessible by `contentful.klingon_blog_posts` and `en-es` by `contentful.spanish_blog_posts`.\n\n#### content_types\n\nAn object whose key-value pairs correspond to a Contentful Content Types. Each\ncontent type's entries will be set on the `contentful` locals object using\nthe key used in the config.\n\n### Configuring a `content_type`\nEach object in the content_types array can have the following properties:\n\n#### id\n\nRequired. The Content Type's ID on Contentful.\n\n#### name\n\nOptional. This is the name of the key the entries will be attached to on the `contentful` object in your views. Defaults to a [pluralized](https://github.com/blakeembrey/pluralize), [underscored](http://stringjs.com/#methods/underscore) representation of the Content Type name (e.g. 'Blog Post' => `contentful.blog_posts`)\n\n#### template\n\nOptional. Path relative to the roots project of a template for a single entry view. Each entry in the Content Type will be passed into the template in an `entry` variable. If not given, the Content Type will not be compiled into single entry views and will only be attached to the `contentful` view helper object.\n\n#### filters\n\nOptional. Takes an object with different filter criteria, see examples of how to structure the object in [Contentful's docs](https://www.contentful.com/developers/documentation/content-delivery-api/javascript/#search-filter).\n\n#### path\n\nOptional. Provide a function that returns a string of the relative path to the output file for a given entry without the extension. First argument passed into the function is the entry. Default is `<name>/<slug>` where `slug` is the [slugified](http://stringjs.com/#methods/slugify) output of the entry's `displayField` (a property of the Content Type), and `name` is the provided `name` option above or the default value. This option is ignored if no `template` is given.\n\nIf the function returns an array of paths, the given entry is compiled to multiple files. The array of paths can be accessed with `entry._urls`. For instance, the configuration below outputs each blog post entry into two folders, `en` and `fr`, for i18n purposes:\n\n```coffee\ncontent_types:\n  blog_posts:\n    id: 'xxxxxx'\n    template: 'views/_post.jade'\n    path: (e) -> (\"#{lang}/#{slugify(e.title)}\" for lang in ['en', 'fr'])\n```\n#### write\n\nOptional. Provide the relative path to the output file that will hold the JSON data of the current content type. The top level JSON object will be an array.\n\n#### transform\n\nOptional. Provide a function to transform (map) every entry in a content type. The transformed data is then added to the jade locals variable and written to JSON (if the write property is provided). Transform can also return a [when.js](https://github.com/cujojs/when) promise.\n\n```coffee\ntransformFunction = (entry) ->\n  delete entry.myProperty\n  entry\n```\n\n#### sort\n\nOptional. Provide a standard compare function that will sort all the data of a content type. The data is sorted __after__ it is transformed and __before__ it is provided to the jade locals variable or written as JSON.\n\n```coffee\ncompareFunction = (a, b) ->\n  # 0           => a and b are equal\n  # -1 or less  => a is before b\n  # 1 or more   => a is after b\n  a.number - b.number\n```\n\n### Asset Image Helper\n\nroots-contentful also provides a convenient view helper called `asset` that allows you to pass in the asset object returned from their API and returns the url. You can also pass in options that will be appended to the image url as a a query string that allows you to specificy size and quality params as documented [here](https://www.contentful.com/developers/documentation/content-delivery-api/javascript/#image-asset-resizing).\n\n```jade\n- for post in contentful.posts\n  img(src!= asset(post.image, {w: 100, h: 100, q: 50}))\n```\n\n### License & Contributing\n\n- Details on the license [can be found here](license.md)\n- Details on running tests and contributing [can be found here](contributing.md)\n",
  "readmeFilename": "readme.md",
  "_id": "roots-contentful@0.0.9",
  "_shasum": "1c5fad0c6994dd72954e7042f5d4bb1c48802ad3",
  "_from": "git://github.com/phbergsmann/roots-contentful.git#ec0a844610a4d093623e41e5a5a90be30c47418f",
  "_resolved": "git://github.com/phbergsmann/roots-contentful.git#ec0a844610a4d093623e41e5a5a90be30c47418f"
}
